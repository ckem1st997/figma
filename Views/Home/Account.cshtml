@model IEnumerable<figma.Models.Members>

@{
    ViewData["Title"] = "Account";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Scripts {
    <link href="~/css/style-account.min.css" rel="stylesheet" />
}
<h1>Account</h1>
<div class="g-signin2 d-none" data-onsuccess="onSignIn"></div>

<p>
    <a href="#" onclick="signOut();">Đăng xuất</a>
</p>
<script>
    function signOut() {
        try {
            var auth2 = gapi.auth2.getAuthInstance(); auth2.signOut().then(function () {
                console.log('User signed out.');
                window.location.assign('/Home/Logout')
            });
        } catch (e) {
            window.location.assign('/Home/Logout')
        }

    }
</script>
@if (Model != null)
{
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Email)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Fullname)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Address)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Mobile)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Email)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.Fullname)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Address)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Mobile)
                    </td>
                    @*<td>
                            <a asp-action="Edit" asp-route-id="@item.MemberId">Edit</a> |
                            <a asp-action="Details" asp-route-id="@item.MemberId">Details</a> |
                            <a asp-action="Delete" asp-route-id="@item.MemberId">Delete</a>
                        </td>*@
                </tr>
            }

        </tbody>
    </table>
}
else
{
    <h2>Bạn đang đăng nhập bằng @ViewBag.social nha !</h2>
    <table class="table">
        <thead>
            <tr>
                <th>
                    Name
                </th>
                <th>
                    ID
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    @ViewBag.name
                </td>

                <td>
                    @ViewBag.id
                </td>
            </tr>
        </tbody>
    </table>
}

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<section class="smb_section">
    <div class="wrapper_smb">
        <div class="gird_smb">
            <div class="grid__item_smb grid__item_smb_25">
                <link href="//theme.hstatic.net/1000253775/1000662899/14/styles.css?v=815" rel="stylesheet" type="text/css" media="all">
                <div class="AccountSidebar">
                    <div class="title_account">
                        <div class="title_account_img">
                            <span id="logo_user" style="background-image: url(&quot;https://static.smb.foolab.tech/images/c93396df92884cf49d1c605d4256b0ac.jpg&quot;);"></span>
                        </div>
                        <div class="content_account">
                            <h2 class="name_account">Một Hai Ba</h2>
                            <p>
                                hopxc1997@gmail.com
                            </p>
                        </div>

                    </div>

                    <div class="AccountContent">
                        <div class="AccountList">
                            <ul class="list-unstyled">
                                <li class="current">
                                    <a href="/account?view=account_info.smb">
                                        <span>
                                            <i class="fas fa-user"></i>
                                        </span>
                                        <span>
                                            Hồ sơ của tôi
                                        </span>
                                    </a>

                                </li>

                                <li>
                                    <a href="/account/?view=order.smb">
                                        <span>
                                            <i class="fas fa-file-invoice"></i>
                                        </span>
                                        <span>
                                            Đơn hàng của tôi
                                        </span>
                                    </a>
                                </li>

                                <li>
                                    <a href="/account?view=addresses.smb">
                                        <span> <i class="fas fa-map-marker-alt"></i></span>
                                        <span> Sổ địa chỉ</span>
                                    </a>
                                </li>

                                <li>
                                    <a href="/account/?view=membership.smb">
                                        <span> <i class="fas fa-crown"></i></span>
                                        <span>  Hạng thành viên</span>
                                    </a>
                                </li>

                                <li>
                                    <a href="/account/?view=quests.smb">
                                        <span>  <i class="fas fa-bars"></i></span>
                                        <span>  Nhiệm vụ của tôi</span>
                                    </a>
                                </li>

                                <li>
                                    <a href="/account/?view=vouchers.smb">
                                        <span> <i class="fas fa-tags"></i></span>
                                        <span> Vouchers</span>
                                    </a>
                                </li>

                                <li>
                                    <a href="/account/?view=reviews.smb">
                                        <span><i class="fas fa-lock"></i></span>
                                        <span> Nhận xét của tôi</span>
                                    </a>
                                </li>

                                <li>
                                    <a href="/account/?view=wishlist.smb">
                                        <span><i class="fas fa-heart"></i></span>
                                        <span>Sản phẩm yêu thích</span>
                                    </a>
                                </li>

                                <li>
                                    <a href="/account/?view=notification.smb">
                                        <span><i class="fas fa-bell"></i></span>
                                        <span> Thông báo của tôi</span>
                                    </a>
                                </li>

                                <li>
                                    <a href="/account/?view=reset_password.smb">
                                        <span><i class="fas fa-lock"></i></span>
                                        <span>Đổi mật khẩu</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="/account/?view=kiem_tra_don_hang.smb">
                                        <span><i class="fas fa-file-invoice"></i></span>
                                        <span>Kiểm tra đơn hàng</span>
                                    </a>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid__item_smb grid__item_smb_75">
                <div class="accounts">
                    <div class="accounts_title">
                        <h2>
                            Hồ sơ của tôi
                        </h2>
                        <p class="update_info_err">
                            *	Cập nhật thông tin lỗi, vui lòng thử lại
                        </p>
                        <p class="data_error">* Có lỗi vui lòng thử lại, hoặc đăng nhập lại</p>
                    </div>
                    <div class="accounts_main">
                        <div class="account">
                            <div class="image_loading" style="display: none;">
                                <img src="https://file.hstatic.net/1000187248/file/spinner_6dbec68bd28a42718f17704bf42d58e7.gif" alt="image loading">
                            </div>
                            <div class="account_col">
                                <div class="account_main">
                                    <label>Họ và tên</label>
                                    <span class="error_input">* Họ và tên quá dài</span>
                                    <input id="fullName" type="text" name="edit" placeholder="Nhập tên đầy đủ của bạn">
                                </div>
                            </div>

                            <div class="account_col">
                                <div class="account_main">
                                    <label>Email</label>
                                    <span class="error_input">* Email không hợp lệ</span>
                                    <input id="email" type="text" placeholder="Nhập Email của bạn">
                                </div>
                            </div>

                            <div class="account_col">
                                <div class="account_main">
                                    <label>Số điện thoại</label>
                                    <span class="error_input"></span>
                                    <input id="phoneNumber" name="edit" type="text" placeholder="Nhập số điện thoại của bạn">
                                </div>
                            </div>

                            <div class="account_col account_col_seeq">
                                <div class="account_main">
                                    <label>Ngày sinh</label>
                                    <span class="error_input">* Ngày sinh không hợp lệ</span>
                                    <input id="dob" type="text" name="edit" placeholder="Nhập ngày sinh của bạn">

                                </div>
                                <div class="account_main">
                                    <label>Giới tính</label>
                                    <div class="genders">
                                        <div class="gender">
                                            <input id="gender_m" type="radio" name="gender" value="m">
                                            <label for="gender_m">
                                                <span class="sp_input"></span>
                                                <span class="sp_lable">Nam</span>
                                            </label>
                                        </div>

                                        <div class="gender">
                                            <input id="gender_f" type="radio" name="gender" value="f">
                                            <label for="gender_f">
                                                <span class="sp_input"></span>
                                                <span class="sp_lable">Nữ</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="account_col">
                                <div class="account_main">
                                    <label>Địa chỉ</label>
                                    <span class="alert_err"></span>
                                    <input type="text" value="" name="addr_full_address" placeholder="Nhập địa chỉ đầy đủ">
                                </div>
                            </div>
                            <div class="account_col">
                                <div class="account_main">
                                    <label>Tỉnh/Thành phố</label>
                                    <span class="alert_err"></span>
                                    <select class="slect_city" value="">
                                    </select>
                                </div>
                            </div>
                            <div class="account_col">
                                <div class="account_main">
                                    <label>Quận huyện</label>
                                    <span class="alert_err"></span>
                                    <select class="slect_district" value="">
                                    </select>
                                </div>
                            </div>
                            <div class="account_col">
                                <div class="account_main">
                                    <label>Ảnh đại diện</label>
                                    <span class="error_input"></span>

                                    <div class="account_avatar">
                                        <div class="avatar_img">
                                            <lable for="avatar">Chọn ảnh</lable>

                                            <input id="avatar" type="file">

                                        </div>

                                        <div id="imgTest" style="display: none;"></div>

                                    </div>

                                </div>
                            </div>
                            <div class="account_col ">
                                <div class="account_main col_main_submit">


                                    <button id="cancel_info">
                                        <span>
                                            Huỷ bỏ
                                        </span>
                                        <img src="https://file.hstatic.net/1000187248/file/spinner_6dbec68bd28a42718f17704bf42d58e7.gif" alt="image loading">
                                    </button>

                                    <button id="submit_info">
                                        <span>
                                            Xác nhận
                                        </span>
                                        <img src="https://file.hstatic.net/1000187248/file/spinner_6dbec68bd28a42718f17704bf42d58e7.gif" alt="image loading">
                                    </button>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Example POST method implementation:
    async function postData(url = '') {
        // Default options are marked with *
        const response = await fetch(url, {
            method: 'GET', // *GET, POST, PUT, DELETE, etc.
            mode: 'cors', // no-cors, *cors, same-origin
            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
            credentials: 'same-origin', // include, *same-origin, omit
            headers: {
                'Content-Type': 'application/json'
                // 'Content-Type': 'application/x-www-form-urlencoded',
            },
            redirect: 'follow', // manual, *follow, error
            referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
            // body: JSON.stringify(data) // body data type must match "Content-Type" header
        });
        return response.json(); // parses JSON response into native JavaScript objects
    }

    postData('/api')
        .then(data => {
            //  console.log(data); // JSON data parsed by `data.json()` call
            //  console.log(data.LtsItem); // JSON data parsed by `data.json()` call
            for (var i = 0; i < data.LtsItem.length; i++) {
                $(".slect_city").append("<option value=" + data.LtsItem[i].ID + ">" + data.LtsItem[i].Title + "</option>");
            }
        });
    postData('/api/gethuyen/1')
        .then(data => {
            console.log(data); // JSON data parsed by `data.json()` call
            // console.log(data.LtsItem); // JSON data parsed by `data.json()` call
            for (var i = 0; i < data.length; i++) {
                $(".slect_district").append("<option value=" + data[i].ID + ">" + data[i].Title + "</option>");
            }
        });

</script>




